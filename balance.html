<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <script src="./web3.min.js"></script>
</head>

<body>

  <h1>Get ERC20 Token Balance </h1>
  <!-- <p>Ethereum support browser or MetaMask is needed.</p> -->


  <form id="submitSend" method="GET">
    <!-- <input type="text" id="token-address" size="80" "></input>
  <p>e.g. 0x0d01bc6041ac8f72e1e4b831714282f755012764</p> -->

  <h2>Wallet Address</h2>
  <input type=" text" id="fromAddress" size="80" ></input>
  <p>e.g. 0x6c25FE295Ecee6F0D8D34fC28dca2de68538fA4a</p>


  <button type="submit">Send ERC20</button>


  <h2>Result</h2>
  <span id=" result"></span>

  </form>

</body>
<script src="./web3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>
  <script>
    var url;
    var id;
    (() => {
      url = window.location.href
      id = url.split('/').slice(-1).toString() // ไอดี ของผู้ login
    })()
    axios({
      method: 'GET',
      url: '/getWalletById', //ส่งไปค่านี้
      headers: {
        id: id  // รหัสนักศึกษา
      }
    }).then(result => { // ดึงค่ามาใส่ใน input ด้วย axios โดยตรง
      console.log("result", result)
      $('#fromAddress').val(result.data.address)
      // $('#privateKey').val(result.data.privateKey)
    })

    document.querySelector('#submitSend').addEventListener('submit', e => {
      e.preventDefault()
      axios({ // ส่งค่าทั้งหมดไปๆ ยัง ฝั่ง nodejs
        method: 'GET',
        url: '/balance/' + id + '/confirm', // ส่งไปยังค่านี้
        headers: {
          fromAddress: $('#fromAddress').val(),

        }
      })
    })
  </script>



</html>